import{g as T,a as w,r as d,s as g,B as Z,M as ee,c as h,_ as l,P as I,u as S,b as oe,d as M,e as ae,j as a,f as x,h as P,F as te,T as re,i as ie,R as k,k as u,W as se,S as ne,C as le,l as ce,p as de,m as pe,n as ue,o as he,q as ge,t as z,v as me,w as xe,x as fe,y as Ce,z as be,A as ve,D as ye,E as De,L}from"./index-a8ffd92f.js";function ke(e){return w("MuiDialog",e)}const We=T("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),W=We,Te=d.createContext({}),E=Te,we=["aria-describedby","aria-labelledby","BackdropComponent","BackdropProps","children","className","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClose","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps"],Se=g(Z,{name:"MuiDialog",slot:"Backdrop",overrides:(e,o)=>o.backdrop})({zIndex:-1}),Me=e=>{const{classes:o,scroll:t,maxWidth:r,fullWidth:c,fullScreen:s}=e,n={root:["root"],container:["container",`scroll${h(t)}`],paper:["paper",`paperScroll${h(t)}`,`paperWidth${h(String(r))}`,c&&"paperFullWidth",s&&"paperFullScreen"]};return P(n,ke,o)},Pe=g(ee,{name:"MuiDialog",slot:"Root",overridesResolver:(e,o)=>o.root})({"@media print":{position:"absolute !important"}}),$e=g("div",{name:"MuiDialog",slot:"Container",overridesResolver:(e,o)=>{const{ownerState:t}=e;return[o.container,o[`scroll${h(t.scroll)}`]]}})(({ownerState:e})=>l({height:"100%","@media print":{height:"auto"},outline:0},e.scroll==="paper"&&{display:"flex",justifyContent:"center",alignItems:"center"},e.scroll==="body"&&{overflowY:"auto",overflowX:"hidden",textAlign:"center","&:after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}})),Be=g(I,{name:"MuiDialog",slot:"Paper",overridesResolver:(e,o)=>{const{ownerState:t}=e;return[o.paper,o[`scrollPaper${h(t.scroll)}`],o[`paperWidth${h(String(t.maxWidth))}`],t.fullWidth&&o.paperFullWidth,t.fullScreen&&o.paperFullScreen]}})(({theme:e,ownerState:o})=>l({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"}},o.scroll==="paper"&&{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},o.scroll==="body"&&{display:"inline-block",verticalAlign:"middle",textAlign:"left"},!o.maxWidth&&{maxWidth:"calc(100% - 64px)"},o.maxWidth==="xs"&&{maxWidth:e.breakpoints.unit==="px"?Math.max(e.breakpoints.values.xs,444):`${e.breakpoints.values.xs}${e.breakpoints.unit}`,[`&.${W.paperScrollBody}`]:{[e.breakpoints.down(Math.max(e.breakpoints.values.xs,444)+32*2)]:{maxWidth:"calc(100% - 64px)"}}},o.maxWidth&&o.maxWidth!=="xs"&&{maxWidth:`${e.breakpoints.values[o.maxWidth]}${e.breakpoints.unit}`,[`&.${W.paperScrollBody}`]:{[e.breakpoints.down(e.breakpoints.values[o.maxWidth]+32*2)]:{maxWidth:"calc(100% - 64px)"}}},o.fullWidth&&{width:"calc(100% - 64px)"},o.fullScreen&&{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${W.paperScrollBody}`]:{margin:0,maxWidth:"100%"}})),Re=d.forwardRef(function(o,t){const r=S({props:o,name:"MuiDialog"}),c=oe(),s={enter:c.transitions.duration.enteringScreen,exit:c.transitions.duration.leavingScreen},{"aria-describedby":n,"aria-labelledby":i,BackdropComponent:p,BackdropProps:C,children:A,className:O,disableEscapeKeyDown:$=!1,fullScreen:_=!1,fullWidth:j=!1,maxWidth:H="sm",onBackdropClick:B,onClose:b,open:R,PaperComponent:K=I,PaperProps:F={},scroll:Y="paper",TransitionComponent:X=te,transitionDuration:U=s,TransitionProps:V}=r,q=M(r,we),f=l({},r,{disableEscapeKeyDown:$,fullScreen:_,fullWidth:j,maxWidth:H,scroll:Y}),v=Me(f),y=d.useRef(),G=m=>{y.current=m.target===m.currentTarget},J=m=>{y.current&&(y.current=null,B&&B(m),b&&b(m,"backdropClick"))},D=ae(i),Q=d.useMemo(()=>({titleId:D}),[D]);return a(Pe,l({className:x(v.root,O),closeAfterTransition:!0,components:{Backdrop:Se},componentsProps:{backdrop:l({transitionDuration:U,as:p},C)},disableEscapeKeyDown:$,onClose:b,open:R,ref:t,onClick:J,ownerState:f},q,{children:a(X,l({appear:!0,in:R,timeout:U,role:"presentation"},V,{children:a($e,{className:x(v.container),onMouseDown:G,ownerState:f,children:a(Be,l({as:K,elevation:24,role:"dialog","aria-describedby":n,"aria-labelledby":D},F,{className:x(v.paper,F.className),ownerState:f,children:a(E.Provider,{value:Q,children:A})}))})}))}))}),Fe=Re;function Ue(e){return w("MuiDialogContent",e)}T("MuiDialogContent",["root","dividers"]);function Le(e){return w("MuiDialogTitle",e)}const Ne=T("MuiDialogTitle",["root"]),Ie=Ne,ze=["className","dividers"],Ee=e=>{const{classes:o,dividers:t}=e;return P({root:["root",t&&"dividers"]},Ue,o)},Ae=g("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:t}=e;return[o.root,t.dividers&&o.dividers]}})(({theme:e,ownerState:o})=>l({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px"},o.dividers?{padding:"16px 24px",borderTop:`1px solid ${(e.vars||e).palette.divider}`,borderBottom:`1px solid ${(e.vars||e).palette.divider}`}:{[`.${Ie.root} + &`]:{paddingTop:0}})),Oe=d.forwardRef(function(o,t){const r=S({props:o,name:"MuiDialogContent"}),{className:c,dividers:s=!1}=r,n=M(r,ze),i=l({},r,{dividers:s}),p=Ee(i);return a(Ae,l({className:x(p.root,c),ownerState:i,ref:t},n))}),_e=Oe,je=["className","id"],He=e=>{const{classes:o}=e;return P({root:["root"]},Le,o)},Ke=g(re,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,o)=>o.root})({padding:"16px 24px",flex:"0 0 auto"}),Ye=d.forwardRef(function(o,t){const r=S({props:o,name:"MuiDialogTitle"}),{className:c,id:s}=r,n=M(r,je),i=r,p=He(i),{titleId:C=s}=d.useContext(E);return a(Ke,l({component:"h2",className:x(p.root,c),ownerState:i,ref:t,variant:"h6",id:C},n))}),Xe=Ye,Ve=ie(a("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM14 13v4h-4v-4H7l5-5 5 5h-3z"}),"CloudUpload");function eo(){const[e,o]=k.useState(""),[t,r]=k.useState(0),[c,s]=k.useState(!1),n=t===1;return u(se,{height:"max",width:"max",children:[a(ne,{height:"max",children:u(le,{padding:{bottom:20},alignItems:"center",height:"max",children:[a(Ge,{}),a(qe,{error:N(t),log:e,setLog:o}),u(ce,{onClick:async()=>{try{de(e)}catch(p){r("Invalid Crash"),console.log(p),s(!0);return}r(1);const i=await pe.uploadCrash(await ue(e));N(i)?(r(i),s(!0)):he({id:i.crashId,code:i.deletionKey})},disabled:e==="",size:"large",variant:"contained",color:"primary",startIcon:n?void 0:a(Ve,{style:{height:"60px",width:"auto"}}),children:[n&&a(ge,{size:60,color:"secondary"}),!n&&a(z,{text:"Upload Crash",variant:"h4"})]})]})}),a(Je,{dialogOpen:c,setDialogOpen:s,uploadError:t})]})}function N(e){return typeof e=="string"}function qe(e){return a(me,{className:"crashy-text-field",padding:{bottom:10,right:10,left:10},width:"max",flexGrow:1,children:a(xe,{error:e.error,value:e.log,onValueChanged:o=>e.setLog(o),multiline:!0,label:"Paste a crash log",variant:"filled",width:"max",height:"max"})})}function Ge(){const e=fe().isPortrait;return u(Ce,{children:[a(be,{size:e?60:100,margin:10}),a(z,{text:"Crashy",fontFamily:"serif",variant:e?"h2":"h1",color:ve})]})}function Je(e){return u(Fe,{open:e.dialogOpen,onClose:()=>e.setDialogOpen(!1),children:[a(Xe,{id:"responsive-dialog-title",children:e.uploadError==="Too Large"?"Log Too Large":"Invalid Log"}),a(_e,{children:a(ye,{color:De,children:a(Qe,{error:e.uploadError})})})]})}function Qe({error:e}){switch(e){case"Too Large":return u(d.Fragment,{children:["Crashy only supports uploading crashes of up to 1MB in size.",a("br",{}),"We're interested in making more crashes fit in, so if you see this, please",a(L,{href:"https://github.com/natanfudge/Crashy/issues/new",children:" Open an issue"})," describing what you tried to upload!"]});case"Invalid Crash":return u(d.Fragment,{children:["There's something wrong with your crash log. ",a("br",{}),a("br",{}),"Think it should be supported by Crashy? ",a(L,{href:"https://github.com/natanfudge/Crashy/issues/new",children:" Open an issue"})," describing your exotic log!"]})}}export{eo as default};
